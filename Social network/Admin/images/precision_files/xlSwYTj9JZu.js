if (self.CavalryLogger) { CavalryLogger.start_js(["ZZrS5"]); }

__d("ActivityLogNUXController",["csx","AsyncRequest","DOM","DOMScroll","URI","$"],(function(a,b,c,d,e,f,g){__p&&__p();var h={NAVIGATION:"navigation",FILTERS:"filters",EDIT:"edit"},i=[h.NAVIGATION,h.FILTERS,h.EDIT],j={ALL:"all",TAGGED_PHOTOS:"taggedphotos"};function k(a,c){a={step:a};c&&(a.action=c);new(b("AsyncRequest"))("/ajax/timeline/all_activity/nux_checkpoint.php").setData(a).send()}var l={init:function(a){l.initialized||(Object.assign(l,{dialogs:a.dialogs,initialized:!0,finished:!1}),l.initDialogs()),l.setStep(a.nextStep)},initDialogs:function(){__p&&__p();i.forEach(function(b,c){var d=l.dialogs[b];d.subscribe("button",function(b,e){a(d,e,c)})});function a(a,b,c){__p&&__p();a.hide();switch(b.getAttribute("data-action")){case"back":l.setStep(i[c-1]);break;case"next":l.setStep(i[c+1]);break;case"defer":l.suppressUsered();break;case"close":case"done":l.setFinished();break}k(i[c],b.getAttribute("data-action"))}},setStep:function(a){if(l.finished)return;switch(a){case h.NAVIGATION:l.setFilter(j.ALL)||l.showNavigationDialog();break;case h.FILTERS:l.setFilter(j.TAGGED_PHOTOS)||l.showFiltersDialog();break;case h.EDIT:l.showEditDialog();break}},showNavigationDialog:function(){var a=l.dialogs[h.NAVIGATION],c=b("DOM").scry(b("$")("navItem_photos"),".linkWrap")[0],d=b("DOM").create("span");b("DOM").appendContent(c,d);a.setContext(d).setOffsetX(5).show();k(h.NAVIGATION)},showFiltersDialog:function(){var a=l.dialogs[h.FILTERS],c=b("DOM").find(document.body,"._kj4");a.setContext(c).setOffsetX(-3).setOffsetY(2).show();k(h.FILTERS)},showEditDialog:function(){var a=l.dialogs[h.EDIT],c=b("DOM").scry(document.body,"._2fmu");c=c[0];c?(b("DOMScroll").scrollTo(c,!0,!0,!1),a.setContext(c).setOffsetX(-8).show(),k(h.EDIT)):l.setFinished()},setFilter:function(a){var c=b("URI").getNextURI(),d=c.getQueryData().log_filter||j.ALL;if(d===a)return!1;c.addQueryData({log_filter:a,usered:1,privacy_source:"activity_log_nux"}).go();return!0},setFinished:function(){l.finished=!0,l.cleanup(),new(b("AsyncRequest"))("/ajax/timeline/all_activity/nux_checkpoint.php").setData({finished:!0}).send()},suppressUsered:function(){b("DOM").scry(b("$")("sideNav"),"a.item").forEach(function(a){a.href=new(b("URI"))(a.href).addQueryData({suppress_usered:1})})},cleanup:function(){var a=l.dialogs;for(var b in a)a[b].destroy()}};e.exports=l}),null);
__d("XWorkHubController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/hub/{?tab}/{?alert_id}/",{ref:{type:"String"},tab:{type:"String"},selected_key:{type:"String",defaultValue:"app_401904056828201"},alert_id:{type:"String"},mini:{type:"Bool",defaultValue:!1}})}),null);